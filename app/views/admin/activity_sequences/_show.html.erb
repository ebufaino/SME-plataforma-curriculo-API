<% context.instance_eval do
  attributes_table do
    row :title
    row :image do |i|
      image_tag url_for(i.image) if i.image.attached?
    end
    row :presentation_text
    row :year do |activity_sequence|
      ActivitySequence.human_enum_name(:year, activity_sequence.year, true)
    end
    row :main_curricular_component
    row :books
    row :estimated_time
    row :status do |activity_sequence|
      ActivitySequence.human_enum_name(:status, activity_sequence.status)
    end
  end

  panel I18n.t('activerecord.attributes.activity_sequence.curricular_components') do
    table_for activity_sequence.curricular_components do
      column :name
    end
  end

  panel I18n.t('activerecord.attributes.activity_sequence.sustainable_development_goals') do
    table_for activity_sequence.sustainable_development_goals do
      column :icon do |i|
        image_tag url_for(i.icon) if i.icon.attached?
      end
      column :name
      column :description
    end
  end

  panel I18n.t('activerecord.attributes.activity_sequence.knowledge_matrices') do
    table_for activity_sequence.knowledge_matrices do
      column :title
    end
  end

  panel I18n.t('activerecord.attributes.activity_sequence.learning_objectives') do
    table_for activity_sequence.learning_objectives do
      column :code
      column :description
    end
  end
end %>